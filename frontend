import React, { useState } from 'react';
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";

const IconLungs = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
    <path d="M6.081 20C6.033 20 6 19.967 6 19.919V9.546a.75.75 0 0 1 .75-.75h.498a.75.75 0 0 1 .75.75v1.836c0 .604.292 1.17.783 1.522l1.611 1.157C11.44 15.336 12 16.387 12 17.52V20" />
    <path d="M18 20V9.546a.75.75 0 0 0-.75-.75h-.498a.75.75 0 0 0-.75.75v1.836c0 .604-.292 1.17-.783 1.522l-1.612 1.157C12.559 15.336 12 16.387 12 17.52V20" />
    <path d="M9 13H7" />
    <path d="M15 13h2" />
    <path d="M12 20v-3" />
  </svg>
);

const IconMessageSquare = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
  </svg>
);

const IconMoon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
  </svg>
);

const IconUtensils = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
    <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" />
    <path d="M7 2v20" />
    <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" />
  </svg>
);

const CounsellingBot = () => {
  const [chatMessages, setChatMessages] = useState([]);
  const [inputMessage, setInputMessage] = useState('');

  const handleSendMessage = () => {
    if (inputMessage.trim() !== '') {
      setChatMessages([...chatMessages, { text: inputMessage, sender: 'user' }]);
      setInputMessage('');
      // Simulate bot response
      setTimeout(() => {
        setChatMessages(prev => [...prev, { text: "I'm here to listen and help. How are you feeling today?", sender: 'bot' }]);
      }, 1000);
    }
  };

  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-3xl font-bold mb-6 text-center">Counselling Bot</h1>
      <Tabs defaultValue="chat">
        <TabsList className="grid w-full grid-cols-4">
          <TabsTrigger value="chat">Chat</TabsTrigger>
          <TabsTrigger value="breathing">Breathing</TabsTrigger>
          <TabsTrigger value="sleep">Sleep</TabsTrigger>
          <TabsTrigger value="diet">Diet</TabsTrigger>
        </TabsList>
        <TabsContent value="chat">
          <Card>
            <CardHeader>
              <CardTitle>Self-Reflection Chat</CardTitle>
              <CardDescription>Talk to our bot and reflect on your thoughts and feelings.</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="h-64 overflow-y-auto mb-4 p-2 border rounded">
                {chatMessages.map((msg, index) => (
                  <div key={index} className={`mb-2 ${msg.sender === 'user' ? 'text-right' : 'text-left'}`}>
                    <span className={`inline-block p-2 rounded ${msg.sender === 'user' ? 'bg-blue-100' : 'bg-gray-100'}`}>
                      {msg.text}
                    </span>
                  </div>
                ))}
              </div>
              <div className="flex">
                <Input
                  type="text"
                  placeholder="Type your message..."
                  value={inputMessage}
                  onChange={(e) => setInputMessage(e.target.value)}
                  className="flex-grow mr-2"
                />
                <Button onClick={handleSendMessage}>Send</Button>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
        <TabsContent value="breathing">
          <Card>
            <CardHeader>
              <CardTitle>Breathing Exercises</CardTitle>
              <CardDescription>Follow guided breathing techniques to relax and reduce stress.</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="text-center">
                <IconLungs />
                <Button className="mt-4">Start 4-7-8 Breathing</Button>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
        <TabsContent value="sleep">
          <Card>
            <CardHeader>
              <CardTitle>Sleep Tracker</CardTitle>
              <CardDescription>Monitor your sleep patterns and get insights.</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="text-center">
                <IconMoon />
                <Button className="mt-4">Log Sleep</Button>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
        <TabsContent value="diet">
          <Card>
            <CardHeader>
              <CardTitle>Diet Tracker</CardTitle>
              <CardDescription>Keep track of your meals and nutritional intake.</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="text-center">
                <IconUtensils />
                <Button className="mt-4">Log Meal</Button>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </div>
  );
};

export default CounsellingBot;
